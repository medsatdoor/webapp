<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/jaxws"
	xmlns:jaxrs="http://cxf.apache.org/jaxrs" xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/aop 
		http://www.springframework.org/schema/aop/spring-aop-2.5.xsd 
		http://www.springframework.org/schema/beans 
		http://www.springframework.org/schema/beans/spring-beans.xsd  
		http://cxf.apache.org/jaxrs  http://cxf.apache.org/schemas/jaxrs.xsd 
		http://cxf.apache.org/jaxws  http://cxf.apache.org/schemas/jaxws.xsd">

	<import resource="classpath:META-INF/cxf/cxf.xml" />

	<aop:aspectj-autoproxy></aop:aspectj-autoproxy>

	<bean id="productDAO" class="com.ecomm.dao.ProductDAOImpl">
	</bean>

	<bean id="productDaoServices" class="com.ecomm.db.services.ProductDaoServicesImpl">
		<property name="productDAO" ref="productDAO" />
	</bean>


	<bean id="productServices" class="com.ecomm.ws.services.ProductServicesImpl">
		<property name="productDaoServices" ref="productDaoServices" />
	</bean>

	<jaxrs:server id="productService" address="/">
		<jaxrs:serviceBeans>
			<ref bean="productServices" />
		</jaxrs:serviceBeans>
	</jaxrs:server>



	<bean name="genericAspects" class="com.ecomm.aspects.GenericMethodAspect" />
	<aop:config>
		<aop:aspect id="genericMethodAspect" ref="genericAspects">
			<aop:before method="retrieveMethodOnInvoke"
				pointcut="execution(* com.ecomm.ws.services.ProductServices.*(..))" />
			<aop:after method="leaveMethodAfterInvoke"
				pointcut="execution(* com.ecomm.ws.services.ProductServices.*(..))" />	
			<aop:after-throwing method="errorListenerOnMethodInvoke" 
				pointcut="execution(* com.ecomm.ws.services.ProductServices.*(..))" throwing="ex"/>	
		</aop:aspect>
	</aop:config>

</beans>